<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>My test page</title>
  </head>
  <body>
    <p>This is my page</p>
    <script>
        let promise = fetch('coffee.jpg');//promise 변수에 fetch()작업으로 반환된 Promise 오브젝트를 저장하고 있다. 지금 오브젝트는 성공도 아니고 실패도 아닌 중간상태를 저장(pending)
        let promise2 = promise.then(response => response.blob());
        /*두번째 Promise가 fullfills일 때 반환된 Blob을 매개변수로 전달받는 
        URL.createObjectURL() 메서드를 실행하고 있다. 이렇게 하면 오브젝트가 가지고 있는 URL이 반환된다. 그런 다음 img 엘리먼트를 만들고 반환된 URL을 src 속성에 지정하여 DOM에 추가한다.*/
        let promise3 = promise2.then(myBlob=>{
            let objectURL = URL.createObjectURL(myBlob);
            let img = document.createElement('img');
            image.src = objectURL;
            document.body.appendChildd(image);
        })
    </script>
  </body>
</html>